<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BNO + 寵物移民 (經法國路線) 時間表生成器</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --warning-color: #e74c3c;
            --success-color: #27ae60;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
        }

        .input-section {
            background: #eef2f5;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 30px;
            border-left: 5px solid var(--accent-color);
        }

        label {
            font-size: 1.1em;
            font-weight: bold;
            margin-right: 10px;
        }

        input[type="date"] {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }

        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1em;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            transition: background 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }

        .timeline-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            display: none; /* Hidden by default */
        }

        .timeline-table th, .timeline-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .timeline-table th {
            background-color: var(--primary-color);
            color: white;
        }

        .timeline-table tr:hover {
            background-color: #f1f1f1;
        }

        .category-tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: bold;
            color: white;
        }

        .cat-human { background-color: #95a5a6; }
        .cat-pet { background-color: #e67e22; }
        .cat-admin { background-color: #9b59b6; }
        .cat-critical { background-color: var(--warning-color); }

        .note {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .highlight-date {
            font-weight: bold;
            color: var(--accent-color);
        }

        @media (max-width: 600px) {
            .timeline-table th, .timeline-table td {
                padding: 10px;
                font-size: 0.9em;
            }
            .input-section {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            button { margin-left: 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>✈️ BNO + 寵物移民 (經法國) 時間表</h1>
    
    <div class="input-section">
        <label for="departDate">請輸入你的目標出發日期：</label>
        <input type="date" id="departDate">
        <button onclick="generateSchedule()">生成時間表</button>
    </div>

    <div id="resultArea">
        <table class="timeline-table" id="scheduleTable">
            <thead>
                <tr>
                    <th style="width: 15%">建議日期</th>
                    <th style="width: 15%">倒數</th>
                    <th style="width: 15%">類別</th>
                    <th style="width: 55%">待辦事項</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- Rows will be inserted here -->
            </tbody>
        </table>
    </div>
</div>

<script>
    function generateSchedule() {
        const dateInput = document.getElementById('departDate').value;
        if (!dateInput) {
            alert("請先選擇出發日期！");
            return;
        }

        const departDate = new Date(dateInput);
        const tableBody = document.getElementById('tableBody');
        const table = document.getElementById('scheduleTable');
        
        // Clear previous results
        tableBody.innerHTML = "";
        table.style.display = "table";

        // Define tasks
        // Offset is in days (negative means before departure)
        const tasks = [
            {
                offset: -180,
                category: "human",
                title: "預約並進行 TB Test (結核病測試)",
                note: "BNO Visa 必須文件。報告有效期為6個月，建議儘早做，但不要早於出發前6個月太多。"
            },
            {
                offset: -150,
                category: "pet",
                title: "寵物：植入晶片 + 狂犬病疫苗 (Rabies)",
                note: "【重要】必須先打晶片再打針。雖然法例要求只需21天，但建議提早做以防萬一。"
            },
            {
                offset: -120,
                category: "human",
                title: "申請 BNO Visa",
                note: "通常需時12週。取得 TB Test 報告後即可申請。"
            },
            {
                offset: -100,
                category: "pet",
                title: "預訂機票 (人+寵物) 及 Pet Taxi",
                note: "致電 KLM/Air France 確認有寵物機位才付款。同時預約從 CDG/AMS 到英國的 Pet Taxi (這類司機很搶手)。"
            },
            {
                offset: -90,
                category: "admin",
                title: "處理強積金 (MPF) 及 銀行戶口",
                note: "整合 MPF，開設離岸戶口或英國銀行戶口 (如 HSBC Expat/Monzo)。"
            },
            {
                offset: -60,
                category: "admin",
                title: "申請 ToR1 (轉移居留免稅)",
                note: "拿到 Visa 後申請。填表時記得將兩隻貓列入 'Goods' 以免被徵收 VAT。"
            },
            {
                offset: -45,
                category: "admin",
                title: "預約搬屋公司 / 船運",
                note: "決定哪些傢俬要運走，哪些要賣掉。"
            },
            {
                offset: -30,
                category: "admin",
                title: "通知終止服務 (水/電/煤/寬頻)",
                note: "預約截數日期。申請香港駕駛執照細節證明書 (用來換英國車牌)。"
            },
            {
                offset: -14,
                category: "pet",
                title: "【關鍵】預約獸醫簽發健康證明書 (Health Cert)",
                note: "必須預約在出發前 10 天內進行。告知獸醫你要經法國去英國，需要 **EU Health Cert** AND **GB Pet Health Cert**。"
            },
            {
                offset: -10,
                category: "critical",
                title: "帶寵物見獸醫 (Final Check)",
                note: "獸醫檢查、杜蟲 (雖然貓入英國不強制杜蟲，但部分航空公司或 EU 入境可能檢查，建議諮詢獸醫)、簽署文件。"
            },
            {
                offset: -5,
                category: "critical",
                title: "前往漁護署 (AFCD) 加簽文件",
                note: "帶齊獸醫簽好的文件去長沙灣政府合署加簽 (Endorsement)。通常即日或隔日可取。"
            },
            {
                offset: -2,
                category: "human",
                title: "網上 Check-in / 整理行李",
                note: "確認所有文件 (護照、Visa、TB Cert、寵物文件) 都在手提行李內。"
            },
            {
                offset: 0,
                category: "critical",
                title: "出發日 (Departure Day) ✈️",
                note: "提早 3-4 小時到達機場。祝你和貓貓旅途順利！"
            }
        ];

        tasks.forEach(task => {
            const taskDate = new Date(departDate);
            taskDate.setDate(departDate.getDate() + task.offset);
            
            const dateStr = taskDate.toISOString().split('T')[0];
            const dayOfWeek = taskDate.toLocaleDateString('zh-HK', { weekday: 'short' });
            
            let catLabel = "";
            let catClass = "";
            
            switch(task.category) {
                case "human": catLabel = "人類簽證"; catClass = "cat-human"; break;
                case "pet": catLabel = "寵物移民"; catClass = "cat-pet"; break;
                case "admin": catLabel = "行政雜務"; catClass = "cat-admin"; break;
                case "critical": catLabel = "重要時刻"; catClass = "cat-critical"; break;
            }

            let countdownText = "";
            if (task.offset === 0) {
                countdownText = "當天";
            } else {
                countdownText = `出發前 ${Math.abs(task.offset)} 天`;
            }

            const row = `
                <tr>
                    <td><span class="highlight-date">${dateStr}</span><br>(${dayOfWeek})</td>
                    <td>${countdownText}</td>
                    <td><span class="category-tag ${catClass}">${catLabel}</span></td>
                    <td>
                        <strong>${task.title}</strong>
                        <div class="note">${task.note}</div>
                    </td>
                </tr>
            `;
            tableBody.innerHTML += row;
        });
    }
</script>

</body>
</html>
